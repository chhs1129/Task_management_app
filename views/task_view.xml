<?xml version="1.0"?> 
<odoo>
	<!-- List of all tasks-->
	<record id="task_view_tree" model="ir.ui.view">
        <field name="name">task.view_tree</field>
        <field name="model">task_management_task</field>
        <field name="type">tree</field>
        <field name="arch" type="xml">
            <tree string="Task" decoration-danger="overtime and state!='cancel'"
										   decoration-success="state != 'cancel' "
										   decoration-muted="state == 'cancel' "
												>
                <field name="name"/>
				<field name="due_date" />
				<field name="priority" />
				<field name="overtime" invisible="True"/>
				<field name="state" invisible="True" />
				<!--decoration-success="overtime == False and finished == False" -->
				<!--     decoration-muted="overtime == False and finished" -->
				
				<field name="submitted"/>
				<field name="finished"/>
			</tree>
        </field>
    </record>

	<!-- Create Page-->
	<record id="view_tree_task" model="ir.ui.view">
		<field name="name">task.view_form</field> 
		<field name="model">task_management_task</field> 
		<field name="arch" type="xml"> 
			<form> 
				<sheet> 
					<header>
						<field name="state" widget="statusbar" statusbar_visable="'Draft','Assigned,'Finished','Closed''"/>
						<button name="button_submit" 
									type="object" 
									class="oe_highlight"
									string="Send finish request to Manager" 
									attrs="{'invisible':['|',('state','=','cancel'),('state','=','done')]}"
									groups = "task_management_app.task_group_user"
									confirm = "Send the request to the manager?"
						/>
						<button name="button_approve" 
									type="object" 
									class="oe_highlight"
									string="Approve this finish request" 
									states='done'
									groups = "task_management_app.task_group_manager" 
									confirm = "Approve this task?"
						/>
						<button name="button_reject" 
									type="object" 
									class="oe_highlight"
									string="Reject this request" 
									states='done'
									groups = "task_management_app.task_group_manager" 
									confirm = "Reject this task?"
						/>			  
					</header>
					<tree> 
						<group name="group_top"> 
							<group name="group_top_left">
								<field name="name" /> 
								<field name="due_date"/>  
								<field name="assignee_id" widget="one2many_tags" /> 
							</group>	
							
							<group name="group_top_right"> 
								<field name="priority" />
								<field name="category_id" />
							</group>							
						</group>
						<group name="group_bottom"> 
							<group name="group_bottom_left">
								<field name="requirements"/>
							</group>
							
						</group>
					</tree> 
				</sheet>
					<div class="oe_chatter"> 
						<field name="message_follower_ids" widget="mail_followers"/> 
						<field name="activity_ids" widget="mail_activity"/> 
						<field name="message_ids" widget="mail_thread"/> 
					</div>
			</form>
		</field> 
	</record> 

	<record id="view_search_task" model="ir.ui.view"> 
		<field name="name">task.view_search</field> 
		<field name="model">task_management_task</field> 
		<field name="arch" type="xml"> 
			<search> 
				<field name="assignee_id"/>
				<field name="name"/>
				<filter name="filter_not_finished" string="Not Finished" domain="[('finished','=',False)]"/> 
				<filter name="filter_finished" string="Finished" domain="[('finished','=',True)]"/> 
			</search> 
		</field> 
	</record>
</odoo>